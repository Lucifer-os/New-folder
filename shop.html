<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>UrbanNest</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-white text-gray-700">

  <!-- Header -->
  <header class="bg-white shadow-md fixed w-full z-50 top-0">
    <div class="container mx-auto flex flex-wrap items-center justify-between p-4">
      <a href="index.html" class="text-2xl font-bold text-blue-600 mb-2 md:mb-0">UrbanNest</a>
      <nav class="w-full md:w-auto">
        <ul class="flex flex-wrap md:flex-nowrap space-x-0 md:space-x-6 items-center justify-center md:justify-start gap-2 md:gap-0">
          <li><a href="index.html" class="hover:text-blue-600">Home</a></li>
          <li><a href="shop.html" class="hover:text-blue-600 font-semibold">Shop</a></li>
          <li><a href="cart.html" class="hover:text-blue-600">Cart</a></li>
          <li><a href="wishlist.html" class="hover:text-blue-600">Wishlist</a></li>
          <li><a href="contact.html" class="hover:text-blue-600">Contact</a></li>
          <li><a href="about.html" class="hover:text-blue-600">About</a></li>
          <li><a href="account.html" class="hover:text-blue-600">Account</a></li>
        </ul>
      </nav>
      <div class="flex flex-wrap items-center space-x-2 md:space-x-4 w-full md:w-auto mt-2 md:mt-0">
        <input type="text" placeholder="Search products..." class="border border-gray-300 rounded px-3 py-1 w-full md:w-auto focus:outline-none focus:ring-2 focus:ring-blue-600" />
        <button class="bg-blue-600 text-white px-4 py-1 rounded hover:bg-blue-700 transition w-full md:w-auto">Search</button>
      </div>
    </div>
  </header>

  <!-- Mobile menu toggle button -->
  <div class="fixed top-4 right-4 md:hidden z-50">
    <button id="mobile-menu-button" aria-label="Toggle menu" class="text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-600">
      <svg class="w-6 h-6" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round">
        <line x1="3" y1="12" x2="21" y2="12" />
        <line x1="3" y1="6" x2="21" y2="6" />
        <line x1="3" y1="18" x2="21" y2="18" />
      </svg>
    </button>
  </div>

  <!-- Shop Content -->
  <main class="container mx-auto px-4 py-24">
    <h1 class="text-3xl font-bold mb-6">Shop</h1>

    <!-- Filters placeholder -->
    <div class="mb-6">
      <label class="mr-2 font-semibold block mb-2 md:inline">Filter by Category:</label>
      <select id="category-filter" class="border border-gray-300 rounded px-2 py-1 w-full md:w-auto">
        <option value="">All</option>
        <option value="Handbags & Clutches">Handbags & Clutches</option>
        <option value="Wall Art & Mirrors">Wall Art & Mirrors</option>
        <option value="Home Living Essentials">Home Living Essentials</option>
        <option value="Bohemian Furniture & Swings">Bohemian Furniture & Swings</option>
        <option value="Gifting & Custom Sets">Gifting & Custom Sets</option>
      </select>
    </div>

    <!-- Products Grid -->
    <div id="product-list" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">
      <!-- Products will be dynamically inserted here -->
    </div>
  </main>

  <!-- Footer -->
  <footer class="bg-gray-100 border-t mt-20">
    <div class="container mx-auto px-4 py-10 grid grid-cols-1 md:grid-cols-4 gap-8">
      <div>
        <h2 class="font-bold mb-4">E-Shop</h2>
        <p>Quality electronics at your fingertips.</p>
      </div>
      <div>
        <h2 class="font-bold mb-4">Quick Links</h2>
        <ul>
          <li><a href="index.html" class="hover:text-blue-600">Home</a></li>
          <li><a href="shop.html" class="hover:text-blue-600">Shop</a></li>
          <li><a href="cart.html" class="hover:text-blue-600">Cart</a></li>
          <li><a href="wishlist.html" class="hover:text-blue-600">Wishlist</a></li>
        </ul>
      </div>
      <div>
        <h2 class="font-bold mb-4">Contact</h2>
        <p>Email: support@eshop.com</p>
        <p>Phone: 123-456-7890</p>
      </div>
      <div>
        <h2 class="font-bold mb-4">Follow Us</h2>
        <div class="flex space-x-4">
          <a href="#" class="hover:text-blue-600">Facebook</a>
          <a href="#" class="hover:text-blue-600">Twitter</a>
          <a href="#" class="hover:text-blue-600">Instagram</a>
        </div>
      </div>
    </div>
    <div class="text-center text-gray-500 py-4 border-t">
      &copy; 2024 E-Shop. All rights reserved.
    </div>
  </footer>

  <script>
    // Base URL of the backend API
    const API_BASE_URL = 'http://localhost:5000';

    // Function to fetch products from backend API and render them
    async function fetchProducts(category = '') {
      try {
        let url = `${API_BASE_URL}/api/products`;
        if (category) {
          url += `?category=${encodeURIComponent(category)}`;
        }
        const response = await fetch(url);
        const products = await response.json();

        const productList = document.getElementById('product-list');
        productList.innerHTML = '';

        // Categories and their product counts
        const categories = {
          'Handbags & Clutches': [],
          'Wall Art & Mirrors': [],
          'Home Living Essentials': [],
          'Bohemian Furniture & Swings': [],
          'Gifting & Custom Sets': []
        };

        // Distribute products into categories
        products.forEach(product => {
          if (categories[product.category] && categories[product.category].length < 4) {
            categories[product.category].push(product);
          }
        });

        // Render products by category
        for (const [category, items] of Object.entries(categories)) {
          if (items.length > 0) {
            const categoryHeader = document.createElement('h2');
            // Rename category headers as per new names
            const categoryNameMap = {
              'Handbags & Clutches': 'Handbags & Clutches',
              'Wall Art & Mirrors': 'Wall Art & Mirrors',
              'Home Living Essentials': 'Home Living Essentials',
              'Bohemian Furniture & Swings': 'Bohemian Furniture & Swings',
              'Gifting & Custom Sets': 'Gifting & Custom Sets'
            };
            categoryHeader.textContent = categoryNameMap[category] || category;
            categoryHeader.className = 'text-2xl font-bold mt-8 mb-4 col-span-full';
            productList.appendChild(categoryHeader);

            items.forEach(product => {
              const productCard = document.createElement('a');
              productCard.href = `product${product._id}.html`;
              productCard.className = 'bg-white rounded shadow p-4 hover:shadow-lg transition flex flex-col';

              productCard.innerHTML = `
                <img src="${product.images && product.images.length > 0 ? product.images[0] : 'https://via.placeholder.com/200x150'}" alt="${product.name}" class="mb-4 w-full h-40 object-cover rounded" />
                <h2 class="text-lg font-semibold">${product.name}</h2>
                <p class="text-blue-600 font-bold mt-2">${product.price ? '$' + product.price.toFixed(2) : ''}</p>
              `;

              productList.appendChild(productCard);
            });
          }
        }
      } catch (error) {
        console.error('Error fetching products:', error);
      }
    }

    // Fetch products on page load
    fetchProducts();

    // Filter products by category
    document.getElementById('category-filter').addEventListener('change', (e) => {
      fetchProducts(e.target.value);
    });
  </script>

</body>
</html>
